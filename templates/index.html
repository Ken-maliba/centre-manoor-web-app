<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pré-Inscription en Ligne - Centre Manoor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <style>
        /* Définition des couleurs (si non déjà dans style.css) */
        :root {
            --color-primary: #007bff; /* Bleu */
            --color-secondary: #ff6347; /* Orange/Rouge du bouton */
            --color-accent: #e9543e; /* Une variante de l'orange */
        }
        
        /* Styles pour le body et le fond d'écran */
        body {
            /* Assurez-vous que le nom du fichier est correct (d'après le dépôt, ce pourrait être IMG-20251123-WA0004.jpg) */
            /* J'utilise un nom générique diplomes_manoor.jpg comme dans l'exemple précédent */
            background-image: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url("{{ url_for('static', filename='diplomes_manoor.jpg') }}"); 
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: center top;
            background-color: #121212; 
            min-height: 100vh;
        }

        /* NOUVEAU STYLE pour le lien/bouton dans la barre de navigation */
        .nav-button a {
            background-color: var(--color-secondary); /* Couleur vive pour attirer l'attention */
            color: white !important;
            padding: 8px 15px;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        .nav-button a:hover {
            background-color: #d1513a;
        }

        /* Styles du contenu */
        .content-section {
            /* Utilisation d'un fond très légèrement transparent pour le contenu */
            background-color: rgba(255, 255, 255, 0.95); 
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin-bottom: 40px;
        }
        
        /* Styles pour le pied de page fixé en bas */
        footer {
            width: 100%;
            background-color: #121212; 
            color: white;
            text-align: center;
            padding: 15px 0;
            position: fixed; 
            bottom: 0;
            left: 0;
            z-index: 1000; 
            box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.3);
        }
        
        /* Marge pour éviter que le contenu ne soit caché par le footer */
        .container.section-padded {
            padding-bottom: 70px; 
        }

        /* Le bouton central initial doit être masqué puisqu'il est dans la nav */
        #toggleFormulaire {
            display: none !important;
        }

        /* Styles pour l'effet de frappe (maintenu pour le titre initial si vous le réactivez) */
        #typing-effect {
            border-right: .15em solid white; 
            white-space: nowrap; 
            overflow: hidden; 
            margin: 0;
            animation: blink-caret .75s step-end infinite;
        }

        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: white }
        }
    </style>
</head>
<body>

    <header>
        <div class="container">
            <a href="#" class="logo">
                <img src="{{ url_for('static', filename='logo.jpg') }}" alt="Logo Manoor" style="max-height: 50px; width: auto; border-radius: 5px;"> 
            </a>
            <nav id="nav-menu">
                <ul>
                    <li><a href="{{ url_for('index') }}" id="navAccueil">Accueil</a></li>
                    <li><a href="#" id="toggleSommaire">Sommaire</a></li>
                    <li class="nav-button"><a href="#" id="navPreInscription">S'inscrire !</a></li> 
                    <li><a href="https://wa.me/c/22373607241" target="_blank">Manoor Shop</a></li>
                    <li><a href="#" id="navToggleContact">Nous Contacter</a></li>
                    <li><a href="{{ url_for('login') }}">Admin Login</a></li>
                </ul>
            </nav>
            <button class="menu-toggle" aria-label="Toggle Navigation">☰</button>
        </div>
    </header>

    <div class="container section-padded">
        
        <h1 id="main-title" style="display: none; text-align: center; color: var(--color-primary);"></h1> 

        <a href="#" id="toggleFormulaire" style="display: none;">
            Cliquez ici pour <span id="typing-effect">Démarrer votre Pré-Inscription</span>
        </a>
        
        <div id="formulaire-content" class="content-section" style="display: none;">
            </div>
        
        <div id="sommaire-content" class="content-section" style="display: none;">
            </div>
        
        <div id="contact" class="content-section" style="display: none;">
            </div>

    </div>
    
    <footer>
        <div class="container">
            <p>&copy; 2023 Centre Manoor. Tous droits réservés.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            // ====================================================
            // Éléments de la page
            // ====================================================
            const sections = document.querySelectorAll('.content-section');
            const mainTitle = document.getElementById('main-title');
            
            // NOUVEL ÉLÉMENT DE NAVIGATION
            const navPreInscription = document.getElementById('navPreInscription');
            
            const navAccueil = document.getElementById('navAccueil');
            const navToggleSommaire = document.getElementById('toggleSommaire');
            const navToggleContact = document.getElementById('navToggleContact');
            const menuToggle = document.querySelector('.menu-toggle');
            const navMenu = document.getElementById('nav-menu');
            
            // ====================================================
            // LOGIQUE DE LA NAVIGATION MOBILE (inchangée)
            // ====================================================
            menuToggle.addEventListener('click', function() {
                navMenu.classList.toggle('active');
            });
            
            navMenu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', function() {
                    if (window.innerWidth <= 768) {
                        navMenu.classList.remove('active');
                    }
                });
            });

            // ====================================================
            // Fonction de Gestion Centrale des Sections (inchangée)
            // ====================================================

            function showSection(sectionId, titleText) {
                sections.forEach(section => {
                    section.style.display = 'none';
                });

                const targetSection = document.getElementById(sectionId);
                if (targetSection) {
                    targetSection.style.display = 'block';
                    mainTitle.textContent = titleText;
                    mainTitle.style.display = 'block';

                    // L'ancien bouton central est maintenant caché par défaut.
                    
                    window.scrollTo({ top: 0, behavior: 'smooth' }); 
                }
            }
            
            // ====================================================
            // Logique du Typing Effect (supprimée car le bouton central n'est plus utilisé)
            // Vous pouvez la réutiliser si vous affichez un titre tapé.
            // ====================================================
            
            // Logique de l'Accueil : Nous affichons maintenant directement le Sommaire par défaut,
            // ou vous pouvez choisir d'afficher une section d'accueil.
            // Pour l'instant, le clic sur Accueil ne fait que réinitialiser la vue.

            // ====================================================
            // Gestion des Clics
            // ====================================================

            // 1. LIEN INSCRIPTION (NOUVELLE FONCTIONNALITÉ)
            navPreInscription.addEventListener('click', function(e) {
                e.preventDefault();
                showSection('formulaire-content', 'Formulaire de Pré-Inscription');
            });


            // Liens de Navigation (inchangés)
            navToggleSommaire.addEventListener('click', function(e) {
                e.preventDefault();
                showSection('sommaire-content', 'Sommaire de Présentation');
            });

            navToggleContact.addEventListener('click', function(e) {
                e.preventDefault();
                showSection('contact', 'Coordonnées du Centre');
            });
            
            // Gérer le clic sur "Accueil" 
            navAccueil.addEventListener('click', function(e) {
                e.preventDefault(); 
                
                // Masquer toutes les sections
                sections.forEach(section => { section.style.display = 'none'; });
                
                // Masquer le titre principal
                mainTitle.style.display = 'none';
                
                // Remonter en haut de la page
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

        });
    </script>
</body>
</html>
